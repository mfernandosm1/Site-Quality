<header class="header">
  <div class="header-container">
    <!-- Logo -->
    <a href="index.html" class="logo-wrapper">
      <img src="images/logo.png" alt="Quality Celulares" class="logo" />
    </a>

    <!-- Navegação Desktop -->
    <nav class="nav-desktop">
      <a href="index.html">Início</a>
      <a href="#smartphones">Smartphones</a>
      <a href="#acessorios">Acessórios</a>
      <div class="search-wrapper">
        <input type="text" id="search-input" placeholder="Buscar..." />
        <button id="search-button" aria-label="Buscar"><i class="fa fa-search"></i></button>
      </div>
    </nav>

    <!-- Botão Mobile -->
    <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menu">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>

  <!-- Menu Mobile (direita) -->
  <div id="mobile-menu" class="mobile-menu" aria-hidden="true">
    <div class="mobile-menu-header">
      <a href="index.html" class="logo-wrapper">
        <img src="images/logo.png" alt="Quality Celulares" class="logo" />
      </a>
      <button id="menu-close" class="menu-close" aria-label="Fechar menu">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>
    <div class="search-wrapper-mobile">
      <input type="text" id="search-input-mobile" placeholder="Buscar..." />
      <button id="search-button-mobile" aria-label="Buscar"><i class="fa fa-search"></i></button>
    </div>
    <nav class="mobile-nav">
      <a href="index.html">Início</a>
      <a href="#smartphones">Smartphones</a>
      <a href="#acessorios">Acessórios</a>
    </nav>
  </div>
</header>

<script>
  // Menu lateral (abre pela direita)
  const menuToggle = document.getElementById("menu-toggle");
  const menuClose = document.getElementById("menu-close");
  const mobileMenu = document.getElementById("mobile-menu");

  menuToggle?.addEventListener("click", () => {
    mobileMenu.style.transform = "translateX(0)";
    mobileMenu.setAttribute("aria-hidden", "false");
  });

  menuClose?.addEventListener("click", () => {
    mobileMenu.style.transform = "translateX(100%)";
    mobileMenu.setAttribute("aria-hidden", "true");
  });

  document.querySelectorAll('#mobile-menu .mobile-nav a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.style.transform = "translateX(100%)";
      mobileMenu.setAttribute("aria-hidden", "true");
    });
  });

  // Função de busca (desktop + mobile)
  function executarBusca(termo) {
    termo = termo.toLowerCase();
    const cards = document.querySelectorAll(".product-card");
    const msg = document.getElementById("no-results");
    let encontrados = 0;

    cards.forEach(card => {
      const nome = card.querySelector("h3").textContent.toLowerCase();
      if (nome.includes(termo)) {
        card.style.display = "flex";
        encontrados++;
      } else {
        card.style.display = "none";
      }
    });

    if (msg) {
      msg.style.display = encontrados === 0 ? "block" : "none";
    }
  }

  // Eventos de busca desktop
  document.getElementById("search-button")?.addEventListener("click", () => {
    const termo = document.getElementById("search-input").value;
    executarBusca(termo);
  });

  document.getElementById("search-input")?.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      executarBusca(e.target.value);
    }
  });

  // Eventos de busca mobile
  document.getElementById("search-button-mobile")?.addEventListener("click", () => {
    const termo = document.getElementById("search-input-mobile").value;
    executarBusca(termo);
    mobileMenu.style.transform = "translateX(100%)"; // fecha após buscar
    mobileMenu.setAttribute("aria-hidden", "true");
  });

  document.getElementById("search-input-mobile")?.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      executarBusca(e.target.value);
      mobileMenu.style.transform = "translateX(100%)";
      mobileMenu.setAttribute("aria-hidden", "true");
    }
  });
</script>
