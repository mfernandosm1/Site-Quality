<% layout('layout') -%>
<div class="card">
  <h3>ðŸ“¦ Produtos</h3>
  <form method="post" action="/produtos/add" class="row">
    <div><label>Nome</label><input type="text" name="name"></div>
    <div><label>PreÃ§o</label><input type="number" name="price" step="0.01"></div>
    <div><label>Imagem (URL)</label><input type="url" name="image"></div>
    <div><label>Categoria</label><input type="text" name="category"></div>
    <div><label>Ativo</label><select name="active"><option value="true">Sim</option><option value="false">NÃ£o</option></select></div>
    <div style="align-self:end"><button class="btn" type="submit">Adicionar</button></div>
  </form>
  <table class="table">
    <thead><tr><th>#</th><th>Nome</th><th>PreÃ§o</th><th>Categoria</th><th>Ativo</th><th>Imagem</th><th>AÃ§Ãµes</th></tr></thead>
    <tbody>
      <% (items||[]).forEach((p,idx)=>{ %>
        <tr>
          <td><span class="badge"><%= idx+1 %></span></td>
          <td><input form="f<%=p.id%>" type="text" name="name" value="<%= p.name %>"></td>
          <td><input form="f<%=p.id%>" type="number" step="0.01" name="price" value="<%= p.price %>"></td>
          <td><input form="f<%=p.id%>" type="text" name="category" value="<%= p.category %>"></td>
          <td>
            <select form="f<%=p.id%>" name="active">
              <option value="true" <%= p.active?'selected':'' %>>Sim</option>
              <option value="false" <%= !p.active?'selected':'' %>>NÃ£o</option>
            </select>
          </td>
          <td><input form="f<%=p.id%>" type="url" name="image" value="<%= p.image %>"></td>
          <td>
            <form id="f<%=p.id%>" method="post" action="/produtos/update">
              <input type="hidden" name="id" value="<%= p.id %>">
              <button class="btn primary">Salvar</button>
            </form>
            <form method="post" action="/produtos/del" style="display:inline">
              <input type="hidden" name="id" value="<%= p.id %>">
              <button class="btn">Excluir</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
